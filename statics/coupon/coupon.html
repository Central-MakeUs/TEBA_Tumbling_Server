<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>텀블링 쿠폰 적립</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet">
    <link rel="stylesheet" type='text/css' href="./coupon.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <style>
        *{
            font-family: 'Nanum Pen Script', cursive;
        }
    </style>
</head>
<body bgcolor="#FFFFCC">

    <div class="container" style="text-align: center;margin-top:20px">
    <img src="https://firebasestorage.googleapis.com/v0/b/tumbling-dabc7.appspot.com/o/logo_green.png?alt=media&token=5a5a9655-5bae-4077-8741-a0db9fcb8c2f">
    <h1>텀블링 쿠폰 적립을 위해 가게 코드를 입력해주세요 ✿˘◡˘✿</h1>
    <div style="text-align: center;">
    <input type="text" style="width:200px; height:30px" id="code" name="storeCode" placeholder="store code"/>
    <button id="button" style="width:60px; height:30px" onclick="add_coupon();">적립</button></div>
    </div>
</body>
<script>
function add_coupon() {
    
    const url = new URL(window.location.href);
    var donate = location.search.split("=");

    var sendData = {
        "donateIdx": donate[1],
        "storeCode" :document.getElementById("code").value,
    }
 
    $.ajax({
      url: "../../donates",
      type: "PATCH",
      cache: false,
      data: sendData,
      dataType: "json",
      success : function (result) {
    alert(result.message)
    
    },error: function (xhr, status, error) {           
    alert("쿠폰적립에 실패했습니다");
}    
});
  }

</script>
</html>